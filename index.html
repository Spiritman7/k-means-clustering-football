<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>k-means-clustering of Premier League footballers in the 2011/12 Season by onthestairs</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>k-means-clustering of Premier League footballers in the 2011/12 Season</h1>
        <p></p>

        <p class="view"><a href="https://github.com/onthestairs/k-means-clustering-football">View the Project on GitHub <small>onthestairs/k-means-clustering-football</small></a></p>


        <ul>
          <li><a href="https://github.com/onthestairs/k-means-clustering-football/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/onthestairs/k-means-clustering-football/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/onthestairs/k-means-clustering-football">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>K-means-clustering of Premier League footballers in the 2011/12 Season</h1>

<h2>Introduction</h2>

<p>I recently saw an application of the <a href="http://en.wikipedia.org/wiki/K-means_clustering">k-means clustering</a> algorithm by Charles Leifer. He <a href="http://charlesleifer.com/blog/using-python-and-k-means-to-find-the-dominant-colors-in-images/">tried to find</a> the dominant colours of an image. I had heard of the algorithm before and this inspired me find my own application of the  technique. After a bit of pondering, I remembered the  <a href="http://www.mcfc.co.uk/the-club/mcfc-analytics">Manchester City Analytics Dataset</a> released a couple of months ago. This data was perfect to analyse. </p>

<p>My idea was less to do with the means of the clusters, but rather the clusters themselves. I would use the algorithm to divide the players up into different groups in the most even way.</p>

<h2>Methodology</h2>

<p>The dataset is a csv file which contains a list of player performances - one row per performance for each player. The first task was to parse the data. So I created a Player class which holds all the stats for that player. I made sure I didn't capture the meta stats ("Team Id", "Venue", etc) - only the numerical stats of performance in the game. Then, I summed these stats up and divided by the number of games played to produce an 'average number of x per game' style stat.</p>

<p>The next step was to normalise this data so certain stats which were high (passes per game for example) weren't overweighted against stats which were low (tackles per game for example). I did this by letting each stat be equal to the linear position of that stat between the lowest and highest stat of that type amongst players. This meant each stat was now a value between 0 and 1.</p>

<p>From here, we can use the k-means algorithm to divide the players into k groups, each with a centre, minimising the distance between each player and its closest centre. As the algorithm depends on random starting conditions, I ran the algorithm 5 times and chose the best clustering. Typically, the clusterings ended up almost identically.</p>

<p>I then looked to find out what the 'key' features of each cluster were. This was calculated by seeing how different each stat of the centre of a cluster was to the same stat of the centre of all the other clusters. The more different the stat was, the more 'salient' to the cluster I declared the stat. </p>

<p>Initially upon doing this, I found that certain clusters were being arranged due to certain players propensity to taking free-kicks or corners. I decided that these stats weren't relevant to what the player was like during open play, so made an option to discard them.</p>

<p>I also made an option to filter the players by the meta stats. This allowed me to discard goalkeepers, players that came on as a substitute, limit to only midfielders etc. Another tweak I made was to only allow players who had more than 10 games played.</p>

<h2>Results</h2>
<p>I initally was curious to see how the players would be divided if we ran the algorithm on all outfield players with the number of clusters being 10 (i.e the number of outfield players on the pitch). Here are the results:
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Shots Cleared off Line Inside Area</span>, <span style="color:green;">Shots Cleared off Line</span>, <span style="color:green;">Attempts Open Play on target</span>, <span style="color:green;">Big Chances</span>, <span style="color:green;">Shots On from Inside Box</span>, <span style="color:green;">Goals Open Play</span>, <span style="color:green;">Goals from Inside Box</span>, <span style="color:green;">Touches open play opp six yards</span>, <span style="color:green;">Shots On Target inc goals</span>, <span style="color:green;">Dispossessed</span></p>
<h4>Players</h4>
<p>Emmanuel Adebayor, Danny Welbeck, Robin van Persie</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Unsuccessful Ball Touch</span>, <span style="color:red;">Pass Forward</span>, <span style="color:green;">Fouls Won in Danger Area inc pens</span>, <span style="color:green;">Offsides</span>, <span style="color:green;">Duels lost</span>, <span style="color:green;">Ground Duels lost</span>, <span style="color:green;">Foul Won Penalty</span>, <span style="color:red;">Successful Long Passes</span>, <span style="color:green;">Total Fouls Won</span>, <span style="color:red;">Unsuccessful Long Passes</span></p>
<h4>Players</h4>
<p>Fernando Torres, Kevin Doyle, Scott Sinclair, Clint Dempsey, Theo Walcott, Bobby Zamora, Stéphane Sessegnon,  Ramires, Tim Cahill, Gabriel Agbonlahor, Demba Ba, Shaun Wright-Phillips, Danny Graham, Luis Suárez, Jonathan Walters, Junior Hoilett, Darren Bent, Jamie Mackie,  Yakubu, Peter Odemwingie, Victor Moses</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Successful Passes Defensive third</span>, <span style="color:green;">Successful Passes Own Half</span>, <span style="color:red;">Touches open play final third</span>, <span style="color:red;">Dispossessed</span>, <span style="color:red;">Attempts Open Play on target</span>, <span style="color:red;">Attempts Open Play off target</span>, <span style="color:red;">Unsuccessful Ball Touch</span>, <span style="color:red;">Key Passes</span>, <span style="color:red;">Ground Duels lost</span>, <span style="color:green;">Pass Forward</span></p>
<h4>Players</h4>
<p> Gary Caldwell, Ashley Williams, Younes Kaboul, Steven Caulker, Laurent Koscielny, Jamie Carragher, Joleon Lescott, Daniel Agger, Brede Hangeland, Garry Monk, Branislav Ivanovic, John Terry, Jonny Evans, Per Mertesacker, Martin Skrtel, Vincent Kompany, William Gallas, Thomas Vermaelen, Antolin Alcaraz, Aaron Hughes, Rio Ferdinand, Ledley King, Fabricio Coloccini,  David Luiz, Philippe Senderos</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Key Passes</span>, <span style="color:green;">Successful Passes Opposition Half</span>, <span style="color:green;">Successful Passes Final third</span>, <span style="color:green;">Pass Left</span>, <span style="color:green;">Total Successful Passes All</span>, <span style="color:green;">Successful Short Passes</span>, <span style="color:green;">Total Successful Passes Excl Crosses Corners</span>, <span style="color:green;">Shots Off Target Outside Box</span>, <span style="color:green;">Through Ball</span>, <span style="color:green;">Blocked Shots Outside Box</span></p>
<h4>Players</h4>
<p>Chris Brunt, Aaron Ramsey, Wes Hoolahan, Jamie O'Hara,  Yaya Touré, Luka Modric, Steven Pienaar, Mikel Arteta, Samir Nasri, Frank Lampard, Tomas Rosicky, Leon Osman, Ryan Giggs, Gylfi Sigurdsson, Steven Gerrard, Adel Taarabt, James Morrison, Andrew Surman, David Silva</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Headed Clearances</span>, <span style="color:green;">Total Clearances</span>, <span style="color:green;">Other Clearances</span>, <span style="color:red;">Touches open play final third</span>, <span style="color:red;">Dispossessed</span>, <span style="color:green;">Blocks</span>, <span style="color:red;">Attempts Open Play on target</span>, <span style="color:red;">Attempts Open Play off target</span>, <span style="color:red;">Unsuccessful Ball Touch</span>, <span style="color:green;">Unsuccessful Long Balls</span></p>
<h4>Players</h4>
<p>Leon Barnett, Gareth McAuley, Chris Smalling, Wes Brown, Scott Dann, Michael Turner, Daniel Gabbidon, Zak Whitbread, James Collins, Michael Williamson, Gary Cahill, Christopher Samba, Gaël Givet, Sylvain Distin, Anton Ferdinand, Richard Stearman, Richard Dunne, David Wheater, Tim Ream, Grant Hanley, Zat Knight, Clint Hill,  Steven Taylor, Johnny Heitinga, Christophe Berra, Roger Johnson,  Jonas Olsson, Russell Martin, Phil Jagielka, Robert Huth, Ryan Shawcross, Elliott Ward</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:red;">Attempts Open Play on target</span>, <span style="color:red;">Goals from Inside Box</span>, <span style="color:red;">Shots On Target inc goals</span>, <span style="color:red;">Shots On from Inside Box</span>, <span style="color:red;">Attempts Open Play off target</span>, <span style="color:red;">Dispossessed</span>, <span style="color:red;">Goals</span>, <span style="color:green;">Unsuccessful Long Balls</span>, <span style="color:green;">Unsuccessful Long Passes</span>, <span style="color:red;">Goals Open Play</span></p>
<h4>Players</h4>
<p>Andy Wilkinson, Steven Reid, Ronald Zubar,  José Enrique, Alan Hutton, Armand Traore, Emmerson Boyce, Bradley Orr, Carlos Cuéllar, Chris Baird, Grétar Steinsson, Dean Whitehead, Marc Wilson, Sam Ricketts, Neil Taylor, Taye Taiwo, Liam Ridgewell, Kyle Naughton,  Ryan Taylor, Billy Jones, Nicky Shorey, Philip Neville, Stephen Warnock, Jason Lowe, Tony Hibbert, Stephen Ward, Shaun Derry, Jack Colback, Danny Simpson, Gaël Clichy, Davide Santon, Phillip Bardsley, Dedryck Boyata, Stephen Kelly, Luke Young,  Martin Olsson, Nedum Onuoha, Maynor Figueroa, John O'Shea,  John Arne Riise, Kieran Richardson, Marc Tierney, Paul Robinson</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Unsuccessful Flick-Ons</span>, <span style="color:green;">Successful Flick-Ons</span>, <span style="color:green;">Aerial Duels lost</span>, <span style="color:green;">Headed Shots On Target</span>, <span style="color:green;">Headed Goals</span>, <span style="color:green;">Offsides</span>, <span style="color:green;">Headed Shots Off Target</span>, <span style="color:green;">Aerial Duels won</span>, <span style="color:green;">Unsuccessful Ball Touch</span>, <span style="color:green;">Unsuccessful Lay-Offs</span></p>
<h4>Players</h4>
<p>Steven Fletcher, Peter Crouch, Steve Morison, Grant Holt, Shane Long, Andy Carroll, Nicklas Bendtner</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Goals from Outside Box</span>, <span style="color:green;">Goals</span>, <span style="color:green;">Attempts Open Play on target</span>, <span style="color:green;">Goals from Inside Box</span>, <span style="color:green;">First Goal</span>, <span style="color:green;">Shots On Target inc goals</span>, <span style="color:green;">Big Chances</span>, <span style="color:green;">Goals Open Play</span>, <span style="color:green;">Goals from Corners</span>, <span style="color:green;">Shots On from Inside Box</span></p>
<h4>Players</h4>
<p>Wayne Rooney, Sergio Agüero, Daniel Sturridge</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Unsuccessful open play crosses</span>, <span style="color:green;">Unsuccessful crosses in the air</span>, <span style="color:green;">Successful open play crosses</span>, <span style="color:green;">Successful crosses in the air</span>, <span style="color:green;">Total Unsuccessful Passes All</span>, <span style="color:green;">Key Passes</span>, <span style="color:red;">Touches open play opp six yards</span>, <span style="color:red;">Attempts from Corners on target</span>, <span style="color:green;">Touches open play final third</span>, <span style="color:red;">Big Chances</span></p>
<h4>Players</h4>
<p>Matthew Jarvis,  Sebastian Larsson,  Elliott Bennett, Stewart Downing, James McClean, Jean Beausejour, Juan Mata,  Antonio Valencia, Gareth Bale, Martin Petrov, Damien Duff,  Nani, Charles N'Zogbia, Leighton Baines, Ryan Shotton</p>
<h3>CLUSTER</h3>
<h4>Salient Features</h4>
<p><span style="color:green;">Tackles Won</span>, <span style="color:red;">Goals from Inside Box</span>, <span style="color:green;">Tackles Lost</span>, <span style="color:red;">Shots On from Inside Box</span>, <span style="color:red;">Attempts Open Play on target</span>, <span style="color:green;">Recoveries</span>, <span style="color:red;">Touches open play opp six yards</span>, <span style="color:green;">Interceptions</span>, <span style="color:red;">Big Chances</span>, <span style="color:red;">Shots On Target inc goals</span></p>
<h4>Players</h4>
<p>Patrice Evra, Youssuf Mulumbu, Moussa Dembélé, Bacary Sagna,  Mark Davies, Jonás Gutiérrez, Scott Parker, Stilian Petrov, Stephen Ireland, Paul Scharner, Benoit Assou-Ekotto, Mohamed Diamé, Karl Henry, Pablo Zabaleta, Lee Cattermole, Yohan Cabaye, Alexandre Song, Michael Carrick, Kyle Walker, José Bosingwa, Bradley Johnson, Phil Jones, Andrew Crofts, Morten Gamst Pedersen, Micah Richards, Raul Meireles, Joe Allen, Ashley Cole, Angel Rangel, Craig Gardner, David Edwards,  Cheik Tioté, Steve Sidwell, Nigel Reo-Coker, Steven N'Zonzi, Danny Murphy, Jordan Henderson, Glen Johnson, Leon Britton, Charlie Adam, James McArthur, James McCarthy, Glenn Whelan, Mauro Formica, Jay Spearing, Gareth Barry, Marouane Fellaini, James Milner, David Fox, Alejandro Faurlin, Joey Barton</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/onthestairs">onthestairs</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>